{"ast":null,"code":"var _jsxFileName = \"/home/gah1289/springboard_assignments/41-react-router-and-react-history/react-jokes-classes/src/JokeList.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport Joke from './Joke';\nimport './JokeList.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass JokeList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.numJokesToGet = 10;\n    this.state = {\n      jokes: []\n    };\n    this.vote = this.vote.bind(this);\n  }\n  async componentDidMount() {\n    this.getJokes();\n  }\n  async getJokes() {\n    let j = [...this.state.jokes];\n    while (j.length < this.numJokesToGet) {\n      let res = await axios.get('https://icanhazdadjoke.com', {\n        headers: {\n          Accept: 'application/json'\n        }\n      });\n      let {\n        status,\n        ...jokeObj\n      } = res.data;\n      if (!j.includes(jokeObj)) {\n        jokeObj.votes = 0;\n        j.push(jokeObj);\n        this.setState({\n          jokes: [...j]\n        });\n      } else {\n        console.log('HEARD IT');\n      }\n    }\n  }\n  vote(id, delta) {\n    this.setState(state => ({\n      jokes: state.jokes.map(j => j.id === id ? {\n        ...j,\n        votes: j.votes + delta\n      } : j)\n    }));\n  }\n  generateNewJokes() {\n    this.setState([]);\n    this.getJokes();\n  }\n  render() {\n    let sortedJokes = [...this.state.jokes].sort((a, b) => b.votes - a.votes);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"JokeList\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Dad Jokes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }, this), sortedJokes.map(joke => /*#__PURE__*/_jsxDEV(Joke, {\n        text: joke.joke,\n        id: joke.id,\n        votes: joke.votes,\n        vote: this.vote\n      }, joke.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 6\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"JokeList-getmore\",\n        onClick: this.generateNewJokes,\n        children: \"Get New Jokes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 4\n    }, this);\n  }\n}\nexport default JokeList;","map":{"version":3,"names":["React","axios","Joke","JokeList","Component","constructor","props","numJokesToGet","state","jokes","vote","bind","componentDidMount","getJokes","j","length","res","get","headers","Accept","status","jokeObj","data","includes","votes","push","setState","console","log","id","delta","map","generateNewJokes","render","sortedJokes","sort","a","b","joke"],"sources":["/home/gah1289/springboard_assignments/41-react-router-and-react-history/react-jokes-classes/src/JokeList.js"],"sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport Joke from './Joke';\nimport './JokeList.css';\n\nclass JokeList extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tjokes : []\n\t\t};\n\n\t\tthis.vote = this.vote.bind(this);\n\t}\n\tnumJokesToGet = 10;\n\n\tasync componentDidMount() {\n\t\tthis.getJokes();\n\t}\n\n\tasync getJokes() {\n\t\tlet j = [\n\t\t\t...this.state.jokes\n\t\t];\n\t\twhile (j.length < this.numJokesToGet) {\n\t\t\tlet res = await axios.get('https://icanhazdadjoke.com', {\n\t\t\t\theaders : { Accept: 'application/json' }\n\t\t\t});\n\t\t\tlet { status, ...jokeObj } = res.data;\n\t\t\tif (!j.includes(jokeObj)) {\n\t\t\t\tjokeObj.votes = 0;\n\t\t\t\tj.push(jokeObj);\n\t\t\t\tthis.setState({\n\t\t\t\t\tjokes : [\n\t\t\t\t\t\t...j\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log('HEARD IT');\n\t\t\t}\n\t\t}\n\t}\n\n\tvote(id, delta) {\n\t\tthis.setState((state) => ({\n\t\t\tjokes : state.jokes.map((j) => (j.id === id ? { ...j, votes: j.votes + delta } : j))\n\t\t}));\n\t}\n\n\tgenerateNewJokes() {\n\t\tthis.setState([]);\n\t\tthis.getJokes();\n\t}\n\n\trender() {\n\t\tlet sortedJokes = [\n\t\t\t...this.state.jokes\n\t\t].sort((a, b) => b.votes - a.votes);\n\t\treturn (\n\t\t\t<div className=\"JokeList\">\n\t\t\t\t<h1>Dad Jokes</h1>\n\t\t\t\t{sortedJokes.map((joke) => (\n\t\t\t\t\t<Joke text={joke.joke} key={joke.id} id={joke.id} votes={joke.votes} vote={this.vote} />\n\t\t\t\t))}\n\t\t\t\t<button className=\"JokeList-getmore\" onClick={this.generateNewJokes}>\n\t\t\t\t\tGet New Jokes\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default JokeList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}